{% extends "base.html" %}

{% block title %}Settings - Network Monitor{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h1><span class="me-2">‚öôÔ∏è</span>Settings</h1>
            <a href="{{ url_for('index') }}" class="btn btn-outline-primary">
                <span class="me-1">‚Üê</span>Back to Dashboard
            </a>
        </div>
    </div>
</div>



<!-- Ping Settings -->
<div class="row mb-4">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0"><span class="me-2">‚öôÔ∏è</span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∏–Ω–≥–∞</h5>
            </div>
            <div class="card-body">
                <form method="POST" action="{{ url_for('update_ping_settings') }}" class="settings-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="ping_interval" class="form-label">–ò–Ω—Ç–µ—Ä–≤–∞–ª –ø–∏–Ω–≥–∞ (—Å–µ–∫)</label>
                            <input type="number" class="form-control form-control-md" id="ping_interval" name="ping_interval" 
                                   value="{{ ping_settings.ping_interval }}" min="5" max="3600" required>
                            <div class="form-text">–û—Ç 5 –¥–æ 3600</div>
                        </div>
                        <div class="form-group">
                            <label for="timeout" class="form-label">–¢–∞–π–º–∞—É—Ç (—Å–µ–∫)</label>
                            <input type="number" class="form-control form-control-md" id="timeout" name="timeout" 
                                   value="{{ ping_settings.timeout }}" min="1" max="30" required>
                            <div class="form-text">–û—Ç 1 –¥–æ 30</div>
                        </div>
                        <div class="form-group">
                            <label for="max_retries" class="form-label">–ü–æ–ø—ã—Ç–∫–∏</label>
                            <input type="number" class="form-control form-control-sm" id="max_retries" name="max_retries" 
                                   value="{{ ping_settings.max_retries }}" min="1" max="10" required>
                            <div class="form-text">–û—Ç 1 –¥–æ 10</div>
                        </div>
                        <div class="form-group">
                            <label for="max_threads" class="form-label">–ü–æ—Ç–æ–∫–∏</label>
                            <input type="number" class="form-control form-control-md" id="max_threads" name="max_threads" 
                                   value="{{ ping_settings.max_threads or 50 }}" min="1" max="200" required>
                            <div class="form-text">–û—Ç 1 –¥–æ 200</div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="batch_size" class="form-label">–†–∞–∑–º–µ—Ä –ø–∞–∫–µ—Ç–∞</label>
                            <input type="number" class="form-control form-control-md" id="batch_size" name="batch_size" 
                                   value="{{ ping_settings.batch_size or 100 }}" min="10" max="1000" required>
                            <div class="form-text">–û—Ç 10 –¥–æ 1000 –∞–¥—Ä–µ—Å–æ–≤</div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">–ê–≤—Ç–æ–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è</label>
                            <form method="POST" action="{{ url_for('optimize_ping_settings') }}" class="d-inline">
                                <button type="submit" class="btn btn-sm btn-outline-info">
                                    <span class="me-1">‚ú®</span>–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å
                                </button>
                            </form>
                            <button type="button" class="btn btn-sm btn-outline-secondary ms-2" id="resetDefaults">
                                <span class="me-1">‚Ü©Ô∏è</span>–°–±—Ä–æ—Å
                            </button>
                            <div class="form-text">–î–ª—è —Ç–µ–∫—É—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∞–¥—Ä–µ—Å–æ–≤</div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <div class="text-muted small">
                                <span class="me-1">‚ÑπÔ∏è</span>
                                –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –ø–∏–Ω–≥ –¥–æ 10000+ –∞–¥—Ä–µ—Å–æ–≤
                            </div>
                            <div class="text-muted small">
                                <span class="me-1">‚ö°</span>
                                –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫—É
                            </div>
                        </div>
                    </div>
                    <div class="d-flex gap-2 flex-wrap">
                        <button type="submit" class="btn btn-primary">
                            <span class="me-1">üíæ</span>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å
                        </button>
                        <a href="{{ url_for('start_scheduler') }}" class="btn btn-success">
                            <span class="me-1">‚ñ∂Ô∏è</span>–ó–∞–ø—É—Å—Ç–∏—Ç—å
                        </a>
                        <a href="{{ url_for('stop_scheduler') }}" class="btn btn-danger">
                            <span class="me-1">‚èπÔ∏è</span>–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
                        </a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Monitoring Configuration -->
<div class="row mb-4">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0"><span class="me-2">üì°</span>Monitoring Configuration</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-4">
                        <div class="card bg-primary bg-opacity-10">
                            <div class="card-body text-center">
                                <span class="text-primary mb-2" style="font-size: 2rem;">üåê</span>
                                <h6 class="text-primary">Subnet Optimization</h6>
                                <p class="text-muted small">
                                    Consecutive IP addresses are automatically grouped into subnets for efficient monitoring.
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card bg-warning bg-opacity-10">
                            <div class="card-body text-center">
                                <span class="text-warning mb-2" style="font-size: 2rem;">üìã</span>
                                <h6 class="text-warning">Status Change Detection</h6>
                                <p class="text-muted small">
                                    All ping results are logged with special filtering for status changes.
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card bg-info bg-opacity-10">
                            <div class="card-body text-center">
                                <span class="text-info mb-2" style="font-size: 2rem;">üóÑÔ∏è</span>
                                <h6 class="text-info">SQLite Database</h6>
                                <p class="text-muted small">
                                    All network addresses and ping logs are stored in a local SQLite database.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Import/Export Database -->
<div class="row mb-4">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0"><span class="me-2">üìä</span>–ò–º–ø–æ—Ä—Ç/–≠–∫—Å–ø–æ—Ä—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <h6>–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</h6>
                        <p class="text-muted">
                            –≠–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –≤ —Ñ–æ—Ä–º–∞—Ç–µ Excel (.xlsx).
                            –í–∫–ª—é—á–∞–µ—Ç —Å–µ—Ç–µ–≤—ã–µ –∞–¥—Ä–µ—Å–∞, –ª–æ–≥–∏ –ø–∏–Ω–≥–æ–≤ –∏ —Å–µ—Ç–µ–≤—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã.
                        </p>
                        <a href="{{ url_for('export_database') }}" class="btn btn-success">
                            <span class="me-1">üì•</span>–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ Excel
                        </a>
                    </div>
                    <div class="col-md-6">
                        <h6>–ò–º–ø–æ—Ä—Ç –∞–¥—Ä–µ—Å–æ–≤</h6>
                        <p class="text-muted">
                            –ò–º–ø–æ—Ä—Ç —Å–µ—Ç–µ–≤—ã—Ö –∞–¥—Ä–µ—Å–æ–≤ –∏–∑ —Ñ–∞–π–ª–∞ Excel (.xlsx).
                            –§–∞–π–ª –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ª–∏—Å—Ç "Network Addresses" —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º–∏ –∫–æ–ª–æ–Ω–∫–∞–º–∏.
                        </p>
                        <form method="POST" action="{{ url_for('import_database') }}" enctype="multipart/form-data">
                            <div class="mb-3">
                                <input type="file" class="form-control" name="file" accept=".xlsx" required>
                            </div>
                            <button type="submit" class="btn btn-primary">
                                <span class="me-1">üì§</span>–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑ Excel
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Application Info -->
<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0"><span class="me-2">‚ÑπÔ∏è</span>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <h6>–§—É–Ω–∫—Ü–∏–∏</h6>
                        <ul class="list-unstyled">
                            <li><span class="text-success me-2">‚úÖ</span>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ ICMP –ø–∏–Ω–≥–æ–≤</li>
                            <li><span class="text-success me-2">‚úÖ</span>–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ–¥—Å–µ—Ç–µ–π</li>
                            <li><span class="text-success me-2">‚úÖ</span>–û–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏</li>
                            <li><span class="text-success me-2">‚úÖ</span>–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –ø–∏–Ω–≥–æ–≤</li>
                            <li><span class="text-success me-2">‚úÖ</span>–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å—Ç–∞—Ç—É—Å–∞</li>
                            <li><span class="text-success me-2">‚úÖ</span>–ò–º–ø–æ—Ä—Ç/—ç–∫—Å–ø–æ—Ä—Ç Excel</li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <h6>–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏</h6>
                        <ul class="list-unstyled">
                            <li><span class="text-info me-2">üíª</span>Flask (Python)</li>
                            <li><span class="text-info me-2">üóÑÔ∏è</span>SQLite</li>
                            <li><span class="text-info me-2">üåê</span>python-nmap</li>
                            <li><span class="text-info me-2">‚è∞</span>APScheduler</li>
                            <li><span class="text-info me-2">üé®</span>Bootstrap 5</li>
                            <li><span class="text-info me-2">üìä</span>OpenPyXL</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
